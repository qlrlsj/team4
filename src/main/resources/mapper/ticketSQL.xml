<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ticket">
		<!-- select id="DAO에서 보내준 메소드명과 동일하다" -->
	<!-- parameterType="패키지 경로를 전부 적어주어야 구분이 가능하다 mapper로 들어온 값을 의미한다" (Mybatis에서는 파라미터타입을 한개만 가능하다) -->
	<!-- resultType="mapper에서 나가는 값을 의미한다" -->
	<!-- <select id="selectOneMember" parameterType="kr.or.member.model.vo.Member" resultType="kr.or.member.model.vo.Member"></select> -->
	
	<select id="selectAllTicketCategory" resultType="tc"> 
		select
			category_id as categoryId, 
			category_name as categoryName,
			parent_category_id as parentCategoryId
		from ticket_category
	</select>
	
	<select id="selectAllLocal" resultType="lc"> 
		select
			local_id as localId, 
			local_name as localName,
			parent_local_id as parentLocalId,
			local_filepath as localFilepath
		from local_category order by localName
	</select>
	
	<insert id="insertTicket" parameterType="t" >
		insert into ticket values
		(ticket_seq.nextval
		,#{localId}
		,#{categoryId}
		,#{memberNo}
		,#{expireDate}
		,#{ticketTitle}
		,#{ticketContent}
		,#{importantContent}
		,#{businessTime}
		,#{businessAddr}
		,#{requiredTime}
		,0,0,#{startDate})
		<selectKey resultType="int" order="AFTER" keyProperty="ticketNo">
			select max(ticket_no) from ticket
		</selectKey>
	</insert>
	
	
</mapper>